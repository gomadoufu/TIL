# 高効率言語 Rust メモ

## Chapter 3

#### Section01

- 所有権システムとは、確保したメモリを、仕様が終わった時点で自動的に破棄する機能のこと。
-  Rustでは、波括弧を利用して任意の場所にブロックを宣言できる。
- 所有権の移動をmoveという
- 所有権の移動を監視し、メモリの有効性を検証するコンパイラの機能をborrow checkerという

### 所有権の原則

1. 値には所有権があり、変数は値の所有者になれる。
2. 所有権は移動するが、所有者は一人(一つの変数)だけである。
3. 所有者が有効スコープから出ると、値は破棄される。



- Rustのあらゆる値が所有権システムの対象となるわけではなく、プリミティブ型は例外。
  プリミティブ型はスタック領域に割り当てられるため、固定サイズかつコピーが早いので所有権の管理はされない(ムーブではなく全てコピーで処理される)
- 所有権が移動する型(オブジェクト、文字列や構造体)出会っても、複製(clone)を行うことで、所有権の移動を回避できる

#### Section02

- 所有権はムーブの他に、関数呼び出しでも移動する。
- 値をreturnすることで、所有権を関数の呼び出し元に返すことができる
- ただ、ちょっと関数を呼び出しただけで値の所有権が移動するのでは不便な時もある。
- そういう時のために、Rustでは**借用**という仕組みがある
- 借用とは、実際的には、関数の引数に**参照型 &**を指定すること
- 参照を受け渡すことで、関数呼び出し元では関数呼び出し後も値を利用できる
- 関数の中で値を変更したいときは、**可変参照 &mut**を用いると良い
- 参照はずし(デリファレンス)はC++と同じく\*変数名と書く

#### Section03

- 複合型として、タプルと配列がある
- 